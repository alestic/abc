# abc (AI Bash Command)

## Synopsis

```
abc [OPTION]... DESCRIPTION...
```

## Description

abc uses a generative AI large language model to generate bash commands based on an English description provided by the user. The program takes the entire command line (excluding options) as the input description and returns bash command(s) that aim to accomplish the described task.

## Features

- Translates natural language descriptions into bash commands
- Interactive mode allows editing of generated commands before execution
- Configurable through a simple INI config file
- Supports multiple configuration profiles
- Provides verbose and debug output options

## Installation

For detailed installation instructions, please refer to [INSTALL.md](INSTALL.md).

### Using

Once set up, you can use `abc` as you normally would. After generating a command, you'll be presented with an editable prompt containing the generated command. You can modify the command if needed before pressing Enter to execute it.

Example:

```
$ abc show brief summary of files changed in local repo
# (next command is generated by abc)
$ git status -s
 M README.md
 M abc_generate
```

In this example, you'd see `git status -s` in an editable prompt, allowing you to modify it before execution.

To use the `abc` without the interactive wrapper, you can use `abc_generate`. This will simply output the generated bash command without running it or putting it on the interactive command line.

```
$ abc_generate "remove trailing whitespace from myprog.py"
sed -i 's/[[:space:]]*$//' myprog.py
```

## Options

- `-c, --config CONFIGFILE`: Path to the primary configuration file. (Defaults to $ABC_CONFIG or "$HOME/.abc.conf")
- `--verbose`: Provides detailed information about the program's execution.
- `--debug`: Provides debug information. Only use this when troubleshooting issues.
- `--version`: Displays the program version and exits.
- `-h, --help`: Shows help message and exits.

## Environment

- `ABC_CONFIG`: Specifies the path to the configuration file. If not set, the script will look for a file at '~/.abc.conf'.

## Configuration

The program will attempt to read the config file from the first of these values provided:
1. `--config` command line option
2. $ABC_CONFIG environment variable
3. $HOME/.abc.conf

## Examples

Tell abc what you want to do:

```
$ abc list filenames sorted from short to long
# (next command is generated by abc)
$ ls | awk '{print length, $0}' | sort -n | cut -d" " -f2-
```

Generate a bash command to figure out the correct `date` format specifier:

```
$ abc current date/time to minute in ISO 8601, but with a space
# (next command is generated by abc)
$ date '+%Y-%m-%d %H:%M'
```

The LLM will make lots of assumptions, often correct:

```
$ abc change the mod time of bashrc to yesterday at noon
# (next command is generated by abc)
$ touch -t $(date -d "yesterday 12:00" +%Y%m%d1200) ~/.bashrc
```

Quotes can be used to protect special characters:

```
$ full=/some/path/to/myfile.txt
$ abc 'strip the directory and extension from $full and store in $name'
# (next command is generated by abc)
$ name=$(basename "${full%.*}")
$ echo $name
myfile
```

It is happy to generate sudo commands, so be careful:

```
$ abc reboot if needed
# (next command is generated by abc)
$ [ -f /var/run/reboot-required ] && sudo reboot
```

More complicated examples might take some trial and error to get the wording right:

```
$ abc find duplicate files. separate groups of file names by blank line
# (next command is generated by abc)
$ find . -type f -print0 | xargs -0 md5sum | sort | uniq -w32 --all-repeated=separate | cut -c 35-
```

It's very handy for aws-cli commands:

```
$ abc List my EC2 instances: id, Name, type, start time
# (next command is generated by abc)
$ aws ec2 describe-instances --query 'Reservations[*].Instances[*].[InstanceId,Tags[?Key==`Name`].Value | [0],InstanceType,LaunchTime]' --output table
```

It is a git expert:

```
$ abc 'change git user email for most recent commit to $email'
# (next command is generated by abc)
$ git commit --amend --author="$(git config user.name) <$email>" --no-edit
```

It knows things about things:

```
$ abc What is my public IP address according to AWS
# (next command is generated by abc)
$ curl -s http://checkip.amazonaws.com
```

I keep using abc every time I turn around:

```
$ abc 'count number of times each element shows in $PATH'
# (next command is generated by abc)
$ echo $PATH | tr ':' '\n' | sort | uniq -c | sort -rn
...
$ abc 'remove duplicate elements from $PATH, keeping the order'
# (next command is generated by abc)
$ PATH=$(echo "$PATH" | awk -v RS=':' -v ORS=':' '!seen[$0]++' | sed 's/:$//')
```

## Exit Status

- 0: Program executed successfully
- 1: An error occurred during execution

## CAVEATS

- LLMs do not always generate correct or expected output. Before running the commands generated by this tool, they should always be reviewed for appropriateness and for dangerous or unintended effects.

- This tool works in one environment on one Ubuntu release for one person. It may not work for you.

- There is a cost to using commercial LLM APIs. Review your spending regularly, and do not use this tool in an environment where it could be run automatically or excessively without human monitoring.

## BUGS

- The command `abc --help` does not currently work when using the interactive bash function.

## TODO

- Support multiple LLM models
- Support multiple LLM providers
- Smarter prompts
- "please think about it step-by-step within 'thinking' tags"
- Warn of dangerous commands and require comment char to be removed
- LLM evaluation of response
- Use request history and generated commands as context for conversation

## Contributing

Pull requests and bug reports are unlikely to be reviewed, incorporated, or fixed. You are welcome to fork the project and publish updates.

## License

This project is licensed under the Apache 2 License - see the [LICENSE](LICENSE) file for details.

## Credits

Written by Claude 3.5 Sonnet<br>
Prompt crafting by Eric Hammond

## Version

Current version: 2024-07-15