# abc (AI Bash Command)

## Synopsis

```
abc [OPTION]... DESCRIPTION...
```

## Description

abc uses a generative AI large language model to generate bash commands based on an English description provided by the user. The program takes the entire command line (excluding options) as the input description and returns bash command(s) that aim to accomplish the described task.

## Features

- Translates natural language descriptions into bash commands
- Interactive mode allows editing of generated commands before execution
- Configurable through a simple INI config file
- Supports multiple configuration profiles
- Provides verbose and debug output options

## Installation

For detailed installation instructions, please refer to [INSTALL.md](INSTALL.md).

Quick installation:

```bash
git clone https://github.com/alestic/abc.git
cd abc
make build install
```

After installation, you'll see instructions for enabling the interactive mode.

### Using Interactive Mode

Once set up, you can use `abc` as you normally would. After generating a command, you'll be presented with an editable prompt containing the generated command. You can modify the command if needed before pressing Enter to execute it.

Example:

```
$ abc show brief summary of files changed in local repo
$ git status -s
 M README.md
 M abc
```

In this example, you'd see `git status -s` in an editable prompt, allowing you to modify it before execution.

To use the original `abc` command without the interactive wrapper, you can use `command abc`.

```
command abc --help
```

## Options

- `--mode {prompt|run|norun}`: Specifies the mode of operation:
  - `prompt` (default): Prompts the user before running the command
  - `run`: Runs the command without prompting [CAUTION: Use carefully!]
  - `norun`: Displays the command without running or prompting
- `-c, --config CONFIGFILE`: Path to the primary configuration file. (Defaults to $ABC_CONFIG or "$HOME/.abc.conf")
- `--verbose`: Provides detailed information about the program's execution.
- `--debug`: Provides debug information. Only use this when troubleshooting issues.
- `--version`: Displays the program version and exits.
- `-h, --help`: Shows help message and exits.

## Environment

- `ABC_CONFIG`: Specifies the path to the configuration file. If not set, the script will look for a file at '~/.abc.conf'.

## Configuration

abc reads configurations from a config file in the INI file format.

Example configuration file:

```ini
[default]
api_key = your_api_key_here
```

The program will attempt to read the config file from the first of these values provided:
1. `--config` command line option
2. $ABC_CONFIG environment variable
3. $HOME/.abc.conf

## Examples

Generate a bash command to figure out correct `date` format specifier:

```
$ abc current date/time to minute in ISO 8601, but with a space
# (next command is generated by abc)
$ date '+%Y-%m-%d %H:%M'
```

The LLM will make lots of assumptions, often correct:

```
$ abc change the mod time of bashrc to yesterday at noon
# (next command is generated by abc)
$ touch -t $(date -d "yesterday 12:00" +%Y%m%d1200) ~/.bashrc
```

Quotes can be used to protect special characters:

```
$ full=/some/path/to/myfile.txt
$ abc 'strip the directory and extension from $full and store in $name'
# (next command is generated by abc)
$ name=$(basename "${full%.*}")
$ echo $name
myfile
```

It is happy to generate sudo commands, so be careful:

```
$ abc reboot if needed
# (next command is generated by abc)
$ [ -f /var/run/reboot-required ] && sudo reboot
```

More complicated examples might take some trial and error to get the wording right:

```
$ abc find duplicate files. separate groups of file names by blank line
# (next command is generated by abc)
$ find . -type f -print0 | xargs -0 md5sum | sort | uniq -w32 --all-repeated=separate | cut -c 35-
```

It's very handy for aws-cli commands:

```
$ abc List my EC2 instances: id, Name, type, start time
# (next command is generated by abc)
$ aws ec2 describe-instances --query 'Reservations[*].Instances[*].[InstanceId,Tags[?Key==`Name`].Value | [0],InstanceType,LaunchTime]' --output table
```

## Exit Status

- 0: Program executed successfully
- 1: An error occurred during execution

## CAVEATS

- LLMs do not always generate correct or expected output. Before running the commands generated by this tool, they should always be reviewed for appropriateness and for dangerous or unintended effects.

- This tool works in one environment on one Ubuntu release for one person. It may not work for you.

- There is a cost to using commercial LLM APIs. Review your spending regularly, and do not use this tool in an environment where it could be run automatically or excessively without human monitoring.

## BUGS

- The command `abc --help` does not currently work when using the interactive bash function.

- abc will generate and show multi-line commands, but only the first line gets run when you hit Enter

## TODO

- Support multiple LLM models
- Support multiple LLM providers
- fix `abc --help` from bash function
- Support multi-line commands
- Smarter prompts
- "please think about it step-by-step within <thinking></thinking> tags"
- LLM evaluation of response

## Contributing

Pull requests and bug reports are unlikely to be reviewed, incorporated, or fixed. You are welcome to fork the project and publish updates.

## License

This project is licensed under the Apache 2 License - see the [LICENSE](LICENSE) file for details.

## Credits

Written by Claude 3.5 Sonnet<br>
Prompt crafting by Eric Hammond

## Version

Current version: 2024-07-14
